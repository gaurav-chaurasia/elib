<!--
<p id="notice"><%= notice %></p>
-->

<h1 class="center">Books</h1>

<div class="container">
<% @books.each do |book| %>
  <div class="col-sm-6 col-md-4"style="padding:0rem;">
    <div class="thumbnail home-page-touchup">
      
      <% if book.images.attached? %>
        <div style="display:flex; overflow: auto; height:24.1rem;">
          <%(0...book.images.count).each do |image| %>
            <%= image_tag(book.images[image], style:"height:24.1rem; width:100%")%>
          <% end %>
        </div>
      <% else %>
          <div class ="col-xs-12 col-md-12 "style= "width:100%; height:24.1rem; background-color:#f4f4f4">
              <div class="no-image-massage"> 
                  No Image Available
              </div>
          </div>
      <% end %>
      
      <div class="caption">
        <h4>
          <small>TITLE:</small> <%= book.title %><br>
          <small>ISBN:</small> <%= book.isbn %> <br> 
        </h4>
        <p><%= truncate(book.description, :ommision => ".... Read More", :length => 150) %></p>
        
        <p>
          <%= link_to 'show', book_path(book), class:"btn btn-sm btn-primary" %>
          <%if user_signed_in? %>
            <% if current_user.admin %>
              <%= link_to 'All request', requests_path(:book_id => book.id), class:"btn btn-sm btn-default " %>
            <% else %>
              <%= link_to 'request', req_path(:book_id => book.id), method: :post, class:"btn btn-sm btn-default " %>
            <% end %>
          <% end %>
          <button class="btn btn-sm bt  n-success" type="button">
            Quantity <span class="badge"> <%= book.quantity %> </span>
          </button> 
        </p>
        <small>    
            added to librery: <%= time_ago_in_words(book.created_at)%> ago
        </small>
      </div>
    </div>
  </div>
<% end %>
</div>


<div class="jumbotron">
  <div class="container">
    <h3>Letest books</h3>
    <div style="width: 100%; height:300px; overflow-x: auto; overflow-y: hidden;">
        <div style="width: 3500px; display:flex;">
          <% @popular_books.each do |book| %>
              <div class="thumbnail col-lg-12 home-page-touchup" style="height:100%;"> 
                <div class="col-md-6" style="padding:0;">
                  <% if book.images.attached? %>
                    <div style="display:flex; overflow-x: auto; overflow-y: hidden; height:24.1rem;">
                      <%(0...book.images.count).each do |image| %>
                        <%= image_tag(book.images[image], style:"height:24.1rem; width:100%")%>
                      <% end %>
                    </div>
                  <% else %>
                      <div class ="col-xs-12 col-md-12 "style= "width:100%; height:24.1rem; background-color:#f4f4f4">
                          <div class="no-image-massage"> 
                              No Image Available
                          </div>
                      </div>
                  <% end %>
                </div>
                <div class="col-md-6">
                    <h4>
                      <small>TITLE:</small> <%= book.title %><br>
                      <small>ISBN:</small> <%= book.isbn %> <br> 
                    </h4>
                    <p><%= truncate(book.description, :ommision => ".... Read More", :length => 70) %></p>
                    
                    <p>
                      <%= link_to 'show', book_path(book), class:"btn btn-sm btn-primary" %>
                      <%if user_signed_in? %>
                        <% if current_user.admin %>
                          <%= link_to 'All request', requests_path(:book_id => book.id), class:"btn btn-sm btn-default " %>
                        <% else %>
                          <%= link_to 'request', req_path(:book_id => book.id), method: :post, class:"btn btn-sm btn-default " %>
                        <% end %>
                      <% end %>
                      <button class="btn btn-sm bt  n-success" type="button">
                        Quantity <span class="badge"> <%= book.quantity %> </span>
                      </button> 
                    </p>
                    <small>    
                        added to librery: <%= time_ago_in_words(book.created_at)%> ago
                    </small>
                </div>
              </div>
          <% end %>
        </div>
    </div><!--/.well -->
  </div>
</div>
